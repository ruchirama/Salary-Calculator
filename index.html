<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Salary Calculator 給与計算ツール</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    
    .fade-enter-active, .fade-leave-active {
      transition: opacity 0.3s ease;
    }
    
    .fade-enter-from, .fade-leave-to {
      opacity: 0;
    }
    
    .slide-fade-enter-active {
      transition: all 0.3s ease-out;
    }
    
    .slide-fade-leave-active {
      transition: all 0.3s cubic-bezier(1, 0.5, 0.8, 1);
    }
    
    .slide-fade-enter-from,
    .slide-fade-leave-to {
      transform: translateX(20px);
      opacity: 0;
    }

    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }

    .btn-hover-effect {
      transition: all 0.3s ease;
    }

    .btn-hover-effect:hover {
      transform: translateY(-2px);
    }

    .btn-hover-effect:active {
      transform: translateY(0);
    }

    @media print {
      body {
        -webkit-print-color-adjust: exact;
      }
      
      table {
        page-break-inside: avoid;
      }
      
      tr {
        page-break-inside: avoid;
        page-break-after: auto;
      }
    }
    

  </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen p-4 md:p-6">
  <div id="app" class="max-w-4xl mx-auto">
    <!-- Header Card -->
    <div class="bg-white rounded-xl shadow-sm p-6 mb-6 animate__animated animate__fadeIn">
      <div class="text-center mb-6">
        <h1 class="text-3xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600">
          Salary Calculator
        </h1>
        <h2 class="text-xl text-gray-600 mb-6">給与計算ツール</h2>
      </div>

      <!-- Controls Section -->
      <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-6">
        <div class="relative w-full md:w-auto">
          <label class="block text-sm font-medium text-gray-700 mb-1">Select Month | 月選択</label>
          <input 
            type="month" 
            v-model="selectedMonth"
            class="w-full md:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
          >
        </div>

<button 
  @click="clearAll"
  class="group relative flex items-center justify-center w-10 h-10 rounded-lg border border-red-200 bg-white hover:bg-red-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white"
  :disabled="!entries.length"
  aria-label="Clear all data"
>
  <svg 
    xmlns="http://www.w3.org/2000/svg" 
    class="h-5 w-5 text-red-500 group-hover:text-red-600 transition-colors" 
    fill="none" 
    viewBox="0 0 24 24" 
    stroke="currentColor"
  >
    <path 
      stroke-linecap="round" 
      stroke-linejoin="round" 
      stroke-width="2" 
      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
    />
  </svg>

  <!-- Optional: Add subtle hover effect overlay -->
  <div class="absolute inset-0 rounded-lg bg-red-100/0 group-hover:bg-red-100/20 transition-colors duration-200"></div>
</button>

      </div>

      <!-- Summary Cards -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg">
          <h3 class="text-sm font-medium text-gray-600 mb-1">Total Entries | 合計エントリー</h3>
          <p class="text-2xl font-bold text-blue-600">{{ entries.length }}</p>
        </div>
        <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg">
          <h3 class="text-sm font-medium text-gray-600 mb-1">Monthly Total | 月間合計</h3>
          <p class="text-2xl font-bold text-green-600">¥{{ monthlyTotal.toLocaleString() }}</p>
        </div>
        <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg">
          <h3 class="text-sm font-medium text-gray-600 mb-1">Average Per Entry | 平均</h3>
          <p class="text-2xl font-bold text-purple-600">
            ¥{{ entries.length ? Math.round(monthlyTotal / entries.length).toLocaleString() : 0 }}
          </p>
        </div>
      </div>
    </div>

    
<div class="max-w-4xl mx-auto">
  <div class="bg-white rounded-2xl shadow-lg p-8 mb-6 animate__animated animate__fadeIn">
    <!-- Header Section -->
    <div class="flex items-center justify-between mb-8 border-b pb-4">
      <div>
        <h3 class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
          New Entry | 新規エントリー
        </h3>
        <p class="text-gray-500 text-sm mt-1">Fill in the details below | 以下の詳細を入力してください</p>
      </div>
      <!-- Progress Indicator -->
      <div class="hidden md:block">
        <div class="flex items-center space-x-2">
          <span class="text-sm text-gray-500">Required fields</span>
          <span class="text-red-500">*</span>
        </div>
      </div>
    </div>

    <form @submit.prevent="addEntry" class="space-y-6">
      <!-- Basic Information Section -->
      <div class="bg-gray-50 rounded-xl p-6 space-y-6">
        <h4 class="text-lg font-semibold text-gray-700 mb-4">Basic Information | 基本情報</h4>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Date Field -->
          <div class="form-group">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Date | 日付
              <span class="text-red-500">*</span>
            </label>
            <div class="relative">
              <input 
                type="date" 
                v-model="newEntry.date"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
              >
            </div>
          </div>

          <!-- Method Selection -->
<div class="form-group space-y-2">
  <label class="flex items-center gap-2 text-sm font-medium text-gray-700">
    <span>Calculation Method | 計算方法</span>
    <span class="text-red-500 text-xs" aria-label="Required">*</span>
  </label>
  
  <div class="relative">
    <select 
    id="calculation-method"
    v-model="newEntry.method"
    required
    aria-label="Calculation Method"
    class="w-full px-4 py-3.5 pr-10 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl appearance-none cursor-pointer hover:bg-gray-100/50 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200"
    @change="resetForm"
  >
    <option value="" disabled selected class="text-gray-500">Select calculation method...</option>
    <option value="cleaning" class="py-2">
      Cleaning Service | クリーニングサービス
    </option>
    <option value="general" class="py-2">
      General Cleaning | 大掃除
    </option>
  </select>
  
    
    <div class="absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none">
      <svg 
        xmlns="http://www.w3.org/2000/svg" 
        class="h-5 w-5 text-gray-400" 
        fill="none" 
        viewBox="0 0 24 24" 
        stroke="currentColor"
      >
        <path 
          stroke-linecap="round" 
          stroke-linejoin="round" 
          stroke-width="2" 
          d="M8 9l4 4 4-4"
        />
      </svg>
    </div>

    <!-- Focus ring animation -->
    <div class="absolute inset-0 rounded-xl pointer-events-none border border-transparent peer-focus:border-blue-500/20 transition-colors duration-200"></div>
  </div>

  <!-- Optional helper text -->
  <p class="text-xs text-gray-500 mt-1.5">
    Choose the appropriate calculation method for your service
  </p>
</div>
</div>
</div>

      <!-- Service Details Section -->
      <div class="bg-gray-50 rounded-xl p-6 space-y-6">
        <h4 class="text-lg font-semibold text-gray-700 mb-4">Service Details | サービス詳細</h4>

        <!-- Location Selection -->
        <div class="form-group">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Location | 場所
            <span class="text-red-500">*</span>
          </label>
          <div class="relative">
            <select 
            v-model="newEntry.location"
            required
            aria-label="Location selection"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg appearance-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-all duration-200"
            @change="calculateTotal"
          >
            <option value="" disabled>Select the location | 場所を選択</option>
            <option value="SAKURAYA">SAKURAYA | さくらや</option>
            <option value="Tsuzumi">Tsuzumi | つづみ</option>
            <option value="Tsuzumi2">Tsuzumi 2 | つづみ2</option>
            <option value="Aun">Aun | 阿吽</option>
          </select>
          
            <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
              <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </div>
          </div>
        </div>

        <!-- Conditional Fields Based on Method -->
        <div v-if="newEntry.method === 'cleaning'" class="space-y-6">
          <!-- Cleaning Service Specific Fields -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Number of Futons -->
            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Number of Futons | 布団の数
                <span class="text-red-500">*</span>
              </label>
              <div class="relative">
                <input 
                  type="number" 
                  v-model.number="newEntry.futonCount"
                  min="1"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                  @input="calculateTotal"
                >
                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                  <span class="text-gray-500">枚</span>
                </div>
              </div>
            </div>

            <!-- Laundry Fee -->
            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Laundry Fee | ランドリー料金
              </label>
              <div class="relative">
                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">¥</span>
                <input 
                  type="number" 
                  v-model.number="newEntry.laundryFee"
                  min="0"
                  class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                  @input="calculateTotal"
                >
              </div>
            </div>
          </div>

          <!-- Tax and Transport Fee -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Tax Amount | 税金額
              </label>
              <div class="relative">
                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">¥</span>
                <input 
                  type="number" 
                  v-model.number="newEntry.taxAmount"
                  min="0"
                  class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                  @input="calculateTotal"
                >
              </div>
            </div>

            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Transport Fee | 輸送費
              </label>
              <div class="relative">
                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">¥</span>
                <input 
                  type="number" 
                  v-model.number="newEntry.transportFee"
                  min="0"
                  class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                  @input="calculateTotal"
                >
              </div>
            </div>
          </div>
        </div>

        <!-- General Cleaning Fields -->
        <div v-if="newEntry.method === 'general'" class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Hours Worked -->
            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Hours Worked | 作業時間
                <span class="text-red-500">*</span>
              </label>
              <div class="relative">
                <input 
                  type="number" 
                  v-model.number="newEntry.hoursWorked"
                  step="0.5"
                  min="0"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                  @input="calculateTotal"
                >
                <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                  <span class="text-gray-500">時間</span>
                </div>
              </div>
            </div>

            <!-- Transport Fee -->
            <div class="form-group">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Transport Fee | 輸送費
              </label>
              <div class="relative">
                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">¥</span>
                <input 
                  type="number" 
                  v-model.number="newEntry.transportFee"
                  min="0"
                  class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"
                  @input="calculateTotal"
                >
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Additional Services Section -->
      <div class="bg-gray-50 rounded-xl p-6">
        <h4 class="text-lg font-semibold text-gray-700 mb-4">Additional Services | 追加サービス</h4>
        
        <div class="space-y-4">
          <!-- Service Options -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <label class="flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 cursor-pointer">
              <input 
                type="checkbox" 
                v-model="newEntry.additionalServices.lostItem" 
                @change="calculateTotal" 
                class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"
              >
              <span class="ml-3">
                <span class="block font-medium">Lost Item Handling | 忘れ物対応</span>
                <span class="text-sm text-gray-500">¥600</span>
              </span>
            </label>

            <label class="flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 cursor-pointer">
              <input 
                type="checkbox" 
                v-model="newEntry.additionalServices.letterPack" 
                @change="calculateTotal" 
                class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"
              >
              <span class="ml-3">
                <span class="block font-medium">Letter Pack Plus | レターパックプラス</span>
                <span class="text-sm text-gray-500">¥520</span>
              </span>
            </label>

            <label class="flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 cursor-pointer">
              <input 
                type="checkbox" 
                v-model="newEntry.additionalServices.coinLaundry" 
                @change="calculateTotal" 
                class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"
              >
              <span class="ml-3">
                <span class="block font-medium">Coin Laundry Drying | コインランドリー乾燥</span>
                <span class="text-sm text-gray-500">¥1,600</span>
              </span>
            </label>
          </div>

          <!-- Other Services -->
          <div class="mt-6">
            <label class="flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-blue-300 transition-all duration-200 cursor-pointer">
              <input 
                type="checkbox" 
                v-model="newEntry.additionalServices.other.enabled" 
                @change="calculateTotal" 
                class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"
              >
              <span class="ml-3 font-medium">Other Service | その他のサービス</span>
            </label>

            <div v-if="newEntry.additionalServices.other.enabled" 
                 class="mt-4 p-4 bg-white rounded-lg border border-gray-200 animate__animated animate__fadeIn">
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Reason | 理由
                  </label>
                  <input 
                    type="text" 
                    v-model="newEntry.additionalServices.other.reason"
                    placeholder="Enter reason | 理由を入力"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  >
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Price | 料金
                  </label>
                  <div class="relative">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">¥</span>
                    <input 
                      type="number" 
                      v-model.number="newEntry.additionalServices.other.price"
                      placeholder="Enter amount | 金額を入力"
                      class="w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                      @input="calculateTotal"
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Total Amount and Submit Section -->
<div class="bg-gradient-to-br from-blue-600 to-indigo-700 p-8 rounded-2xl text-white shadow-lg">
  <div class="flex flex-col md:flex-row justify-between items-center gap-6 md:gap-8">
    <div class="w-full md:w-auto">
      <h4 class="text-base font-medium text-blue-100">Total Amount | 合計金額</h4>
      <p class="text-4xl font-bold mt-2 tracking-tight">¥{{ newEntry.total.toLocaleString() }}</p>
    </div>
    
    <button 
    type="submit"
    class="group relative w-full md:w-auto bg-white/10 backdrop-blur-sm hover:bg-white/20 border border-white/20 px-6 py-3.5 rounded-xl transition-all duration-200 font-medium disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white/10 flex items-center justify-center gap-3"
    :disabled="!newEntry.total"
    aria-label="Add entry"
  >
    <svg 
      xmlns="http://www.w3.org/2000/svg" 
      class="h-5 w-5 text-blue-100" 
      fill="none" 
      viewBox="0 0 24 24" 
      stroke="currentColor"
      aria-hidden="true"
    >
      <path 
        stroke-linecap="round" 
        stroke-linejoin="round" 
        stroke-width="2" 
        d="M12 6v6m0 0v6m0-6h6m-6 0H6"
      />
    </svg>
    <div class="absolute inset-0 rounded-xl bg-white/0 group-hover:bg-white/5 transition-colors duration-200"></div>
  </button>
  
  </div>
</div>
</div>

<style>
/* Custom Styles */
.form-group label {
  position: relative;
}

.form-group label .text-red-500 {
  position: relative;
  top: -2px;
}

/* Smooth transitions */
.transition-all {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}

/* Custom checkbox styles */
input[type="checkbox"] {
  accent-color: #2563eb;
}

/* Input focus styles */
input:focus, select:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
}

/* Hover effects */
.hover\:shadow-lg:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate__fadeIn {
  animation: fadeIn 0.3s ease-out;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
  .form-group {
    margin-bottom: 1.5rem;
  }
  
  .grid {
    gap: 1.5rem;
  }
}
</style>

    <!-- Main Table -->
<div class="bg-white rounded-xl shadow-lg p-8 overflow-hidden animate__animated animate__fadeIn">
  <div class="overflow-x-auto">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-b border-gray-200">
          <th class="px-6 py-5 text-left text-sm font-medium text-gray-500">Date | 日付</th>
          <th class="px-6 py-5 text-left text-sm font-medium text-gray-500">Details | 詳細</th>
          <th class="px-6 py-5 text-left text-sm font-medium text-gray-500">Total | 合計</th>
          <th class="px-6 py-5 text-left text-sm font-medium text-gray-500">Cumulative | 累計</th>
        </tr>
      </thead>
      <tbody>
        <transition-group name="slide-fade">
          <tr 
            v-for="(entry, index) in entries" 
            :key="entry.id"
            class="group border-b border-gray-100 hover:bg-gray-50/60 transition-all duration-200"
          >
            <td class="px-6 py-5 text-sm text-gray-600">{{ entry.date }}</td>
            <td class="whitespace-pre-line break-words text-left align-top px-6 py-5 min-w-[300px] text-gray-600 text-sm">
              {{ entry.details }}
            </td>
            <td class="px-6 py-5 text-sm font-medium text-gray-700">¥{{ entry.total.toLocaleString() }}</td>
            <td class="relative px-6 py-5 text-sm font-medium text-gray-700">
              <div class="flex items-center justify-between gap-4">
                <span>¥{{ entry.cumulative.toLocaleString() }}</span>
                <button 
                  @click="deleteEntry(index)"
                  class="invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all duration-200 text-red-500 hover:text-red-600 focus:outline-none"
                  title="Delete entry"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        </transition-group>
      </tbody>
    </table>
  </div>
</div>

      <!-- Action Buttons -->
    <div class="flex flex-col-reverse md:flex-row justify-end gap-3 mt-8">
      <button 
      @click="copyToClipboard"
      class="group relative w-full md:w-auto bg-white border border-gray-200 hover:border-blue-500 text-gray-700 px-6 py-3 rounded-xl transition-all duration-200 font-medium shadow-sm hover:shadow flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:border-gray-200"
      :disabled="!entries.length"
      aria-label="Copy to clipboard"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 group-hover:text-blue-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
      </svg>
    </button>
    
  <!-- Add Invoice Generation Button -->
  <button 
  @click="generateInvoice"
  class="group relative w-full md:w-auto bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl transition-all duration-200 font-medium shadow-sm hover:shadow-md flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600"
  :disabled="!entries.length"
  aria-label="Generate Invoice"
>
  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white/90" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
  </svg>
</button>

</div>

  <script>

/**
 * Futon Service Management System
 * Vue.js Application
 * Last Updated: 2025-02-09
 */

const { createApp } = Vue

createApp({
  /**
   * =================================
   * DATA SECTION
   * =================================
   */
  data() {
    return {
      selectedMonth: '2025-02',
      entries: [],
      monthlyTotal: 0,
      nextId: 1,
      newEntry: {
        date: '',
        method: 'cleaning',
        location: '',
        futonCount: 0,
        hoursWorked: 0,
        transportFee: 0,
        laundryFee: 0,
        taxAmount: 0,
        additionalServices: {
          lostItem: false,
          letterPack: false,
          coinLaundry: false,
          other: {
            enabled: false,
            reason: '',
            price: 0
          }
        },
        total: 0,
        details: ''
      }
    }
  },

  /**
   * =================================
   * METHODS SECTION
   * =================================
   */
  methods: {
    /**
     * Price Calculation Methods
     * =================================
     */
    calculateBasePrice(location, futonCount) {
      if (!location) return 0;
      
      switch(location) {
        case 'SAKURAYA':
          return futonCount <= 3 ? 4000 : 4500;
        case 'Tsuzumi':
          if (futonCount <= 3) return 3500;
          if (futonCount <= 5) return 4000;
          return 4000;
        case 'Tsuzumi2':
          return 3000;
        case 'Aun':
          if (futonCount <= 3) return 5000;
          if (futonCount === 4) return 5500;
          if (futonCount <= 6) return 6000;
          return 6000;
        default:
          return 0;
      }
    },

    calculateTotal() {
      let total = 0;
      let details = '';

      // Validate location selection
      if (!this.newEntry.location) {
        this.newEntry.total = 0;
        this.newEntry.details = '場所を選択してください | Please select a location';
        return;
      }

      if (this.newEntry.method === 'cleaning') {
        // Calculate base price
        const basePrice = this.calculateBasePrice(this.newEntry.location, this.newEntry.futonCount);
        total += basePrice;

        // Format cleaning service details
details = [
  `Location | 場所: ${this.newEntry.location}`,
  `Number of Futons | 布団の数: ${this.newEntry.futonCount}`,
  `Base Price | 基本価格: ¥${basePrice.toLocaleString()}`,
  `Laundry | ランドリー: ¥${this.newEntry.laundryFee.toLocaleString()}`,
  `Transportation | 交通費: ¥${this.newEntry.transportFee.toLocaleString()}`
].join('\n');


        // Additional Services section
        let additionalServicesText = 'Additional Services | 追加サービス:';
        let hasAdditionalServices = false;

        if (this.newEntry.additionalServices.lostItem) {
          additionalServicesText += '\n- 忘れ物対応: ¥600';
          total += 600;
          hasAdditionalServices = true;
        }
        if (this.newEntry.additionalServices.letterPack) {
          additionalServicesText += '\n- レターパックプラス: ¥520';
          total += 520;
          hasAdditionalServices = true;
        }
        if (this.newEntry.additionalServices.coinLaundry) {
          additionalServicesText += '\n- コインランドリー乾燥: ¥1,600';
          total += 1600;
          hasAdditionalServices = true;
        }
        if (this.newEntry.additionalServices.other.enabled &&
            this.newEntry.additionalServices.other.price > 0 &&
            this.newEntry.additionalServices.other.reason) {
          additionalServicesText += `\n- ${this.newEntry.additionalServices.other.reason}: ¥${this.newEntry.additionalServices.other.price.toLocaleString()}`;
          total += this.newEntry.additionalServices.other.price;
          hasAdditionalServices = true;
        }

        if (!hasAdditionalServices) {
          additionalServicesText += ' なし | None';
        }

        details += '\n' + additionalServicesText;
        details += `\nTax | 税金: ¥${this.newEntry.taxAmount.toLocaleString()}`;

        // Add to running total
        if (this.newEntry.transportFee > 0) total += this.newEntry.transportFee;
        if (this.newEntry.laundryFee > 0) total += this.newEntry.laundryFee;
        if (this.newEntry.taxAmount > 0) total -= this.newEntry.taxAmount;

      } else if (this.newEntry.method === 'general') {
        // Hourly rate calculation
        const hourlyRate = 1200;
        const baseAmount = Math.round(this.newEntry.hoursWorked * hourlyRate);
        total += baseAmount;

        // Format general cleaning details
        details = [
          `Location | 場所: ${this.newEntry.location}`,
          `Price per hour | 時間あたりの料金: ¥${hourlyRate.toLocaleString()}`,
          `Number of hours | 時間数: ${this.newEntry.hoursWorked}`,
          `Transportation | 交通費: ¥${this.newEntry.transportFee.toLocaleString()}`
        ].join('\n');

        // Additional Services section
        let additionalServicesText = 'Additional Services | 追加サービス:';
        let hasAdditionalServices = false;

        if (this.newEntry.additionalServices.lostItem) {
          additionalServicesText += '\n- 忘れ物対応: ¥600';
          total += 600;
          hasAdditionalServices = true;
        }
        if (this.newEntry.additionalServices.letterPack) {
          additionalServicesText += '\n- レターパックプラス: ¥520';
          total += 520;
          hasAdditionalServices = true;
        }
        if (this.newEntry.additionalServices.coinLaundry) {
          additionalServicesText += '\n- コインランドリー乾燥: ¥1,600';
          total += 1600;
          hasAdditionalServices = true;
        }
        if (this.newEntry.additionalServices.other.enabled &&
            this.newEntry.additionalServices.other.price > 0 &&
            this.newEntry.additionalServices.other.reason) {
          additionalServicesText += `\n- ${this.newEntry.additionalServices.other.reason}: ¥${this.newEntry.additionalServices.other.price.toLocaleString()}`;
          total += this.newEntry.additionalServices.other.price;
          hasAdditionalServices = true;
        }

        if (!hasAdditionalServices) {
          additionalServicesText += ' なし | None';
        }

        details += '\n' + additionalServicesText;

        if (this.newEntry.transportFee > 0) total += this.newEntry.transportFee;
      }

      this.newEntry.total = total;
      this.newEntry.details = details;
    },

    /**
     * Form Management Methods
     * =================================
     */
    resetForm() {
      this.newEntry = {
        ...this.newEntry,
        location: '',
        futonCount: 0,
        hoursWorked: 0,
        transportFee: 0,
        laundryFee: 0,
        taxAmount: 0,
        additionalServices: {
          lostItem: false,
          letterPack: false,
          coinLaundry: false,
          other: {
            enabled: false,
            reason: '',
            price: 0
          }
        },
        total: 0,
        details: ''
      };
      this.calculateTotal();
    },

    /**
     * Entry Management Methods
     * =================================
     */
    addEntry() {
      if (!this.newEntry.location) {
        this.showToast('場所を選択してください | Please select a location', 'error');
        return;
      }
      if (!this.newEntry.date) {
        this.showToast('日付を入力してください | Please enter a date', 'error');
        return;
      }

      const entry = {
        id: this.nextId++,
        date: this.newEntry.date,
        method: this.newEntry.method,
        location: this.newEntry.location,
        details: this.newEntry.details,
        total: this.newEntry.total
      };
      
      this.entries.push(entry);
      this.entries.sort((a, b) => new Date(a.date) - new Date(b.date));
      this.calculateMonthlyTotal();
      
      this.resetForm();
      this.newEntry.date = '';
      
      this.showToast('Entry added successfully | エントリーが追加されました');
    },

    clearAll() {
      if (confirm('Are you sure you want to clear all entries? This action cannot be undone.\n\nすべてのエントリーを削除してもよろしいですか？この操作は取り消せません。')) {
        this.entries = [];
        this.calculateMonthlyTotal();
        this.showToast('All entries have been cleared | すべてのエントリーが削除されました');
      }
    },

    deleteEntry(index) {
      if (confirm('Are you sure you want to delete this entry?\n\nこのエントリーを削除してもよろしいですか？')) {
        this.entries.splice(index, 1);
        this.calculateMonthlyTotal();
        this.showToast('Entry deleted successfully | エントリーが削除されました');
      }
    },

    calculateMonthlyTotal() {
      let cumulative = 0;
      this.entries.forEach(entry => {
        cumulative += entry.total;
        entry.cumulative = cumulative;
      });
      this.monthlyTotal = cumulative;
    },

    /**
     * Export Methods
     * =================================
     */
    async copyToClipboard() {
      if (!this.entries.length) {
        this.showToast('No entries to copy | コピーするエントリーがありません', 'error');
        return;
      }

      try {
        const summary = [
          `Salary Summary | 給与概要`,
          `Date: ${this.selectedMonth}`,
          `Total Entries: ${this.entries.length}`,
          `Total Amount: ¥${this.monthlyTotal.toLocaleString()}`,
          `\nDetailed Entries:\n`,
          ...this.entries.map(entry => {
            return [
              `Date: ${entry.date}`,
              `Method: ${entry.method === 'cleaning' ? 'Cleaning Service | クリーニングサービス' : 'General Cleaning | 大掃除'}`,
              entry.details,
              `Total: ¥${entry.total.toLocaleString()}`,
              `Cumulative: ¥${entry.cumulative.toLocaleString()}`,
              `----------------------------------------`
            ].join('\n')
          })
        ].join('\n');

        await navigator.clipboard.writeText(summary);
        this.showToast('Summary copied to clipboard | コピーしました');
      } catch (error) {
        console.error('Copy failed:', error);
        this.showToast('Failed to copy content | コピーに失敗しました', 'error');
      }
    },
      
    generateInvoice() {
      if (!this.entries.length) {
        this.showToast('No entries to generate invoice | 請求書を作成するエントリーがありません', 'error');
        return;
      }
    
      // Create a temporary container with print-specific styles
      const invoiceContent = document.createElement('div');
      invoiceContent.innerHTML = `
        <div style="font-family: 'Inter', sans-serif; padding: 20mm; max-width: 210mm;">
          <h1 style="text-align: center; font-size: 24px; margin-bottom: 30px;">
            Salary Summary | 給与概要
          </h1>
          
          <div style="margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 15px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span style="font-weight: bold;">Month | 月:</span>
              <span>${this.selectedMonth}</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span style="font-weight: bold;">Total Entries | 合計件数:</span>
              <span>${this.entries.length}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="font-weight: bold;">Total Amount | 合計金額:</span>
              <span>¥${this.monthlyTotal.toLocaleString()}</span>
            </div>
          </div>
    
          <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
            <thead>
              <tr style="border-bottom: 2px solid #000;">
                <th style="text-align: left; padding: 10px; width: 20%;">Date | 日付</th>
                <th style="text-align: left; padding: 10px; width: 40%;">Details | 詳細</th>
                <th style="text-align: right; padding: 10px; width: 20%;">Total | 合計</th>
                <th style="text-align: right; padding: 10px; width: 20%;">Cumulative | 累計</th>
              </tr>
            </thead>
            <tbody>
              ${this.entries.map(entry => `
                <tr style="border-bottom: 1px solid #ddd;">
                  <td style="padding: 10px;">${entry.date}</td>
                  <td style="padding: 10px; white-space: pre-line;">${entry.details}</td>
                  <td style="text-align: right; padding: 10px;">¥${entry.total.toLocaleString()}</td>
                  <td style="text-align: right; padding: 10px;">¥${entry.cumulative.toLocaleString()}</td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      `;
    
      // Configure PDF options
      const options = {
        margin: [10, 5],
        filename: `invoice_${this.selectedMonth}.pdf`,
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { 
          scale: 3, // Increased scale for better resolution
          logging: true, // Enable logging for debugging
          useCORS: true,
          scrollX: 0,
          scrollY: 0
        },
        jsPDF: { 
          unit: 'mm',
          format: 'a4',
          orientation: 'portrait'
        }
      };
    
      // Generate PDF with proper timing
      setTimeout(() => {
        html2pdf()
          .set(options)
          .from(invoiceContent)
          .save()
          .then(() => {
            this.showToast('Invoice generated successfully | 請求書が作成されました');
          })
          .catch(err => {
            console.error('PDF generation failed:', err);
            this.showToast('PDF generation failed | PDFの作成に失敗しました', 'error');
          });
      }, 500);
    },
    
    

    /**
     * Utility Methods
     * =================================
     */
    showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg text-white ${
        type === 'success' ? 'bg-green-600' : 'bg-red-600'
      } animate__animated animate__fadeIn shadow-lg z-50`;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.classList.remove('animate__fadeIn');
        toast.classList.add('animate__fadeOut');
        setTimeout(() => toast.remove(), 1000);
      }, 3000);
    }
  },

  /**
   * =================================
   * LIFECYCLE HOOKS
   * =================================
   */
  mounted() {
    this.calculateTotal();
  }
}).mount('#app')


  </script>
</body>
</html>